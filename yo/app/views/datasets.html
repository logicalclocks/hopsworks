<div ng-controller="MainCtrl as mainCtrl">
  <div ng-include="'nav.html'"></div>

  <div id="wrapper"
       class="toggled"
       ng-controller="DatasetsCtrl as datasetsCtrl">

    <div ng-controller="MetadataCtrl as metadataCtrl">

      <div class="overlay" ></div>
      <div ng-include="'navProject.html'"></div>
      <section>
          <div >
            <div ng-show="mainCtrl.searchReturned !== ''" class="content-wrapper">
              <div id="projectSearchResults">
                <div ng-include="'views/search.html'"></div>
              </div>
            </div>
            <div class="content-wrapper" style="background-color: white;" ng-controller="ProjectCtrl as projectCtrl" ng-show="mainCtrl.searchReturned === ''">
              <div growl reference="3" class="pull-right" ></div>
              <h3>               
                <div flex="65">
                    Filter: 
                    <a ng-click="datasetsCtrl.shared = undefined; datasetsCtrl.status = undefined; datasetsCtrl.isPublic = undefined;" class="file-control active">All</a>
                    <a ng-click="datasetsCtrl.shared = true; datasetsCtrl.status = true; datasetsCtrl.isPublic = false;" class="file-control">Shared</a>
                    <a ng-click="datasetsCtrl.shared = false; datasetsCtrl.status = true; datasetsCtrl.isPublic = false;" class="file-control">Exclusive</a>
                    <a ng-click="datasetsCtrl.shared = true; datasetsCtrl.status = false; datasetsCtrl.isPublic = false;" class="file-control">Pending</a>
                    <!--<a ng-click="datasetsCtrl.shared = false; datasetsCtrl.status = false; datasetsCtrl.isPublic = true;" class="file-control">Public</a>-->
                  </div>
                <div class="pull-right" style="margin-right:30px;  margin-top:-25px;">
                  <hamburger-toggle state="datasetsCtrl.tgState" class="hamburger-toggle" ng-click="datasetsCtrl.deselect()">
                    </hamburger-toggle>
                  </div>
              </h3>            
              <div class="row row-no-margin-left">
               <div class="ds-content col-lg-12" ng-class="{'sidenav-open': datasetsCtrl.tgState == true}" style="margin-top: -5px; overflow: hidden;">                 
                 <div class="row" resizable r-directions="['bottom']" ng-class="{'rg-row-top-ds': readme !== null}">
                  <div class="col-lg-12 ds-box" style="margin-top: 15px;">                    
                    <div class="file-box">
                      <div  class="file" ng-click="datasetsCtrl.newDataSetModal()">
                        <div class="icon">
                          <i class="glyphicon glyphicon-plus"></i>
                        </div>
                        <div class="file-name ng-binding">
                          <div style="text-align: center; color: green; padding:8px;">
                            Create New DataSet
                          </div>
                          <div class="row"> </div>
                        </div>
                      </div>
                    </div>   
                    <div ng-repeat="dataset in datasetsCtrl.files| filter:{shared: datasetsCtrl.shared, status: datasetsCtrl.status, publicDs: datasetsCtrl.isPublic} | orderBy: 'name'">
                      <div ng-init="(iscollapsed$index) = true"
                           class="file-box"
                           context-menu
                           data-target="menu-{{ dataset.name}}">
                        <div class="file" ng-class="{'greyed' : datasetsCtrl.selected === dataset.name}">
                          <a>
                            <span class="corner"></span>
                            <div data-toggle="tooltip" title="Click here to enter this dataset" class="icon" ng-click="projectCtrl.browseDataset(dataset)">
                              <i class="glyphicon" ng-class="{'glyphicon-folder-open': datasetsCtrl.selected === dataset.name, 'glyphicon-folder-close' : datasetsCtrl.selected !== dataset.name}"></i>
                            </div>
                            <div class="file-name" data-toggle="tooltip" title="Click on the bottom section to view metadata for this dataset." 
                                 ng-click="datasetsCtrl.select(dataset.name, dataset, $event); metadataCtrl.setMetadataTemplate(dataset); datasetsCtrl.filePreview(dataset, false, true);">
                              <span data-toggle="tooltip"
                                    title="{{dataset.name.length > 22 ? dataset.name:''}}">
                                {{dataset.name}}
                              </span>                          
                              <br/>
                              <small><b>Owner:</b> 
                                <span data-toggle="tooltip"
                                      title="{{dataset.owner.length > 17 ? dataset.owner:''}}">
                                  {{dataset.owner | limitTo: 17}}
                                </span>
                              </small>
                              <span class="pull-right publicDS" ng-class="{'glyphicon glyphicon-globe': dataset.publicDs === true}"></span>
                            </div>
                          </a>
                        </div>
                      </div>  
                      <div uib-dropdown class="position-fixed" id="menu-{{dataset.name}}">
                        <ul uib-dropdown-menu class="uib-dropdown-amore">
                          <li>
                            <a class="pointer"
                               role="menuitem"
                               tabindex="0"
                               ng-click="projectCtrl.browseDataset(dataset)">
                              <span><i class="fa fa-files-o"></i>
                                Browse files</span>
                            </a>
                          </li>
                          <li ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === false">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="1"
                               ng-click="datasetsCtrl.deleteFile(dataset.name)">
                              <span><i class="fa fa-trash"></i>
                                Remove DataSet</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner'">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="2"
                               ng-click="datasetsCtrl.share(dataset.name)">
                              <span><i class="fa fa-share"></i>
                                Share DataSet</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" class="divider"></li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === false">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="3"
                               ng-click="metadataCtrl.attachTemplate(dataset); $event.stopPropagation();">
                              <span><i class="fa fa-upload"></i>
                                Add metadata</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === false">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="4"
                               ng-click="metadataCtrl.detachTemplate(dataset); $event.stopPropagation();">
                              <span><i class="fa fa-download"></i>
                                Remove metadata</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" class="divider"></li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === false">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="5"
                               ng-click="panel.highlight = true; datasetsCtrl.compress(dataset); $event.stopPropagation();">
                              <span><i class="fa fa-file-archive-o"></i>
                                Compress</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === false">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="6"
                               ng-click="datasetsCtrl.makePublic(dataset.id); $event.stopPropagation();">
                              <span><i class="fa fa-share-alt"></i>
                                Make Public</span>
                            </a>
                          </li>
                          <li ng-if="dataset.name.indexOf('::') === -1" ng-show="projectCtrl.role === 'Data owner' && dataset.publicDs === true">
                            <a class="pointer"
                               role="menuitem"
                               tabindex="6"
                               ng-click="datasetsCtrl.removePublic(dataset.id); $event.stopPropagation();">
                              <span><i class="fa fa-share-alt"></i>
                                Remove Public</span>
                            </a>
                          </li>
                        </ul>
                      </div>
                    </div> <!-- end repeat -->
                  </div>
                </div>
                <!--background-color: rgb(250, 251, 252);-->
                <div class="row rg-row-bottom-ds" ng-show="readme !== null">
                  <div class="col-lg-12 ds-box-bottom">
                    <div class="col-lg-12" style="border-style: solid; border-width: 1px; border-radius: 10px; border-color:#eee;">
                      <!-- README.md is displayed here -->
                      <div class="row" style="background: #eee; font-size:20px; font-weight: bold; border-radius: 10px 10px 0 0;">
                        &nbsp;<i class="fa fa-book"></i>&nbsp; README.md</div>
                      <div class="col-lg-12" >
                        <div class ="row" ng-bind-html="readme" style="overflow-y: auto; ">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              </div>
              </div><!--content wrapper -->
          </div>


        <md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left"
                    style="margin-top: 0px;">

          <md-toolbar class="md-theme-light"
                      style="background-color: #f1f1f1;color: gray; height: 39px; min-height: 39px;">

            <div class="md-toolbar-tools">
              <h2 style="margin:0;">
                <span>Metadata manager</span>
              </h2>
              <span flex></span>
              <button style="font-size:15px;height:28px;color:white;padding-top: 3px;"
                      ng-click="metadataCtrl.submitMetadata(metadataCtrl.metaData);"
                      class="btn btn-success">
                <i class="fa fa-save"></i>
                Save
              </button>
            </div>

          </md-toolbar>
          <md-content layout-padding>
            <p>Associating metadata to: <a><b>'{{metadataCtrl.currentFile.name}}'</b></a></p>

            <label class="control-label" ng-show="metadataCtrl.noTemplates">
              <font color="red">There is no template attached to file {{metadataCtrl.currentFile.name}}</font>
            </label>
            <p></p>

            <div class="pull-left" ng-if="!metadataCtrl.noTemplates">
              Select a template to add metadata to:
              <ui-select ng-model="metadataCtrl.selectedTemplate" theme="select2" 
                         ng-disabled="metadataCtrl.noTemplates"
                         on-select="metadataCtrl.updateMetadataTabs()" style="min-width: 15em;">

                <ui-select-match placeholder="Select a template...">{{$select.selected.templateName}}</ui-select-match>

                <ui-select-choices repeat="template in metadataCtrl.currentFileTemplates | filter: $select.search">
                  <small>
                    <span ng-bind-html="'' + template.templateName | highlight: $select.search"></span>
                  </small>
                </ui-select-choices>
              </ui-select>
            </div>

            <div style="margin-top: 10em;">

              <uib-tabset justified="false">
                <uib-tab ng-repeat="tab in metadataCtrl.tabs" class="tab-title" heading="{{tab.title}}" active="tab.active"
                         disabled="tab.disabled" select="metadataCtrl.onTabSelect(tab)"
                         style="padding-left: 1em;">

                  <form name="{{tab.title}}{{$index}}" ng-submit="metadataCtrl.submitMetadata(metadataCtrl.metaData)"
                        style="padding:0em 1em 50em 1em;">

                    <ul class="card-list" ng-model="column.cards">
                      <li ng-repeat="card in tab.cards" style="padding-bottom: 0;">
                        <div style="padding-bottom: 0;">

                          <!--The table section-->
                          <div class="row col-md-15" style="padding-bottom: 0;">
                            <!--The row section-->
                            <div class="col-md-12" style="padding-bottom: 0;">
                              <div tabindex="1" class="col-md-2">
                                <span class="card-title pull-right btn btn-xs"
                                      style="font-size: 1em">{{card.title}}</span>
                              </div>

                              <div tabindex="2" class="col-md-1" style="padding-bottom: 0;">
                                <span class="field-info pull-left" uib-tooltip="{{card.description}}">
                                  <i class="fa fa-exclamation-circle"></i>
                                </span>
                              </div>

                              <div tabindex="3" class="pull-left col-md-9" style="padding-bottom: 0;">
                                <!--text input field type-->
                                <div ng-if="card.fieldtypeid === 1">
                                  <input value="" class="fillInMetadataInput" id="sizeFieldInput"
                                         tooltips title="{{card.description}}"
                                         ng-show="true"
                                         ng-model="metadataCtrl.metaData[card.id]"/>
                                </div>

                                <!--single select list input type-->
                                <div ng-if="card.fieldtypeid === 2">

                                  <ui-select ng-model="metadataCtrl.metaData[card.id]" theme="select2" ng-disabled="disabled" style="min-width: 300px;" required>
                                    <ui-select-match placeholder="Select a value...">{{$select.selected.value}}</ui-select-match>
                                    <ui-select-choices repeat="item.value as item in card.fieldtypeContent | filter: $select.search">
                                      <!--<div ng-bind-html="item.value | highlight: $select.search"></div>-->
                                      <small>
                                        <span ng-bind-html="''+item.value | highlight: $select.search"></span>
                                      </small>
                                    </ui-select-choices>
                                  </ui-select>
                                </div>

                                <!--multi select list input type-->
                                <div ng-if="card.fieldtypeid === 3">
                                  <div
                                    isteven-multi-select
                                    input-model="card.fieldtypeContent"
                                    output-model="metadataCtrl.metaData[card.id]"
                                    button-label="value"
                                    item-label="value"
                                    tick-property="ticked"
                                    output-properties="value"
                                    >
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <hr>
                        </div>
                      </li>
                    </ul>
                    <hr/>
                    <div>
                      <button class="btn btn-default">
                        <i class="glyphicon glyphicon-floppy-save"></i>
                        Save
                      </button>
                      <button class="btn btn-default" type="button"
                              ng-click="datasetsCtrl.close()">
                        <i class="glyphicon glyphicon-chevron-left"></i>
                        Back
                      </button>
                    </div>
                  </form>
                </uib-tab>
              </uib-tabset>
            </div>
          </md-content>
        </md-sidenav>
        <!--END OF ADD METADATA SLIDER-->        

        <!--<div class="col-lg-4" style="border-left: 1px dashed lightgrey; padding-left: 0px;">-->
        <div ng-show="mainCtrl.searchReturned === ''">
          <div class="ds-sidenav" ng-class="{open: datasetsCtrl.tgState}">
            <div class="ibox float-e-margins" style="margin-top: 0px; margin-bottom: -25px; height: 95%;">
              <div class="file-manager">
                <div>
                  <md-content class="md-padding" style="padding-top: 0px; min-width: 300px;">
                    <md-tabs md-dynamic-height md-border-bottom>
                      <md-tab label="Details">
                        <div ng-show="datasetsCtrl.selected === null">
                          <br>
                          <div class="file" style="text-align: center;">
                            <div class="icon">
                              <i class="glyphicon glyphicon-folder-open"></i>
                            </div>  
                            Select a DataSet to view its details.
                          </div>           
                        </div>
                        <md-content>
                          <table id="mytable1" ng-show="datasetsCtrl.selected" class="table table-bordred table-striped" style="margin-top: 16px;">

                            <tr style="background-color: #fafafa; border-top: none;">
                              <td style="color: grey;">Name</td>
                              <td style="color: grey;">{{datasetsCtrl.selectedFiles[datasetsCtrl.selected].name}}</td>
                            </tr>
                            
                            <tr style="background-color: #fafafa">
                              <td style="color: grey;">Description</td>
                              <td style="color: grey;">{{datasetsCtrl.selectedFiles[datasetsCtrl.selected].description}}</td>
                            </tr>

                            <tr style="background-color: #fafafa">
                              <td style="color: grey;">Last modified</td>
                              <td style="color: grey;">{{datasetsCtrl.selectedFiles[datasetsCtrl.selected].modification| date:'short'}}</td>
                            </tr>

                            <tr style="background-color: #fafafa">
                              <td style="color: grey;">Owner</td>
                              <td style="color: grey;">{{datasetsCtrl.selectedFiles[datasetsCtrl.selected].owner}}</td>
                            </tr>
                            <tr ng-show="datasetsCtrl.selectedFiles[datasetsCtrl.selected].publicDs" style="background-color: #fafafa">
                              <td style="color: #ff4081;">Public</td>
                              <td style="color: #ff4081;">This DataSet is public.</td>
                            </tr>
                            <!--                            <tr style="background-color: #fafafa">
                                                          <td style="color:lightgrey;">Permission</td>
                                                          <td style="color: grey;">{{datasetsCtrl.fileDetail.permission}}</td>
                                                        </tr>-->
                          </table>

                        </md-content>




                        <!--div class="ibox-content" id="hoverable" ng-click="datasetsCtrl.toggleRight()">
                          <span class="pull-left" style="font-size: 16px; margin-top:-2px;">Add metadata</span> <i
                            class="fa fa-pencil-square-o pull-right" style="font-size: 20px;"></i>
                        </div-->
                        <!--METADATA PRESENTATION SECTION-->
                        <div id="board"  style="font-family: Times New Roman; overflow: hidden; height: 75%;">
                          <!--                        <div class="modal-header">
                                                              <span class="modal-title"
                                                                    ng-model="columnName"><label
                                                                style="font-size: 15px">Metadata of dataset
                                                                :</label>
                                                                <font style="font-size:16px;font-style: italic" color="green">
                                                                  <b>{{datasetsCtrl.fileDetail.name}}</b></font></span>
                                                </div>-->
                          <div ng-show="metadataCtrl.noTemplates" style="padding-left: 10px" ng-show="!datasetsCtrl.selected">
                            <div style="display: inline-block">
                              <div style="display: inline-block"><h4>No extended metadata.</h4></div>
                              <span class="field-info" uib-tooltip="Right click on the file to add a metadata template." style="padding-top: 5px;padding-left:3px">
                                <i class="fa fa-exclamation-circle"></i>
                              </span>
                            </div>
                          </div>
                          <div ng-hide="metadataCtrl.noTemplates" ng-show="datasetsCtrl.selected" style="overflow-y: auto;">
                            <div class="input-group-lg" align="left">
                              <div ng-repeat="table in metadataCtrl.metainfo| orderBy:'name'"
                                   style="background-color:#FAFAFA;padding-bottom:10px;padding-top: 10px; border-bottom: dashed #d5d5d5 thin;">
                                <div style="background-color:#D8D8D8;padding-left:15px;padding-top: 5px;">
                                  <label style="font-size: 16px;">{{table.name  | limitTo: 25}}</label>
                                  <span type="button" class="btn btn-default btn-xs fa fa-minus-square-o pull-right" 
                                          style="background-color:#D8D8D8;margin-right: 5px;margin-top: 2px;"
                                          data-toggle="collapse" 
                                          data-target="#metadatadiv{{$index}}">                                            
                                  </span>
                                </div>
                                <div id="metadatadiv{{$index}}" class="collapse in">
                                  <div ng-repeat="field in table.rest" style="font-size:15px;" class="fields-in-table panel-default">
                                    <div >
                                      <div>
                                        <label>{{field.tagName  | limitTo: 20}}</label>
                                        <span class="field-info" tooltip-placement="right"
                                              uib-tooltip="{{table.desc[field.tagName]}}" style="padding-top: 5px; padding-left:5px">
                                          <i class="fa fa-exclamation-circle"></i>
                                        </span>
                                        <a style="color: green;"
                                           ng-click="metadataCtrl.setVisibilityAddMetadata(table.id + '-' + field.tagName, true)" 
                                           ng-hide="metadataCtrl.visibilityInfo[table.id + '-' + field.tagName]">
                                          <i class="fa fa-plus-circle pull-right" style="padding-right: 10px; padding-top: 6px"></i>
                                        </a>

                                      </div>
                                    </div>

                                    <div  class="pull-left " style="width:80%;">
                                      <div ng-repeat="card in table.inputcontent">
                                        <!--text input field type-->
                                        <div class="input-group input-group-sm"
                                             ng-if="field.tagName === card.title && card.fieldtypeid === 1" 
                                             ng-show="metadataCtrl.visibilityInfo[table.id + '-' + field.tagName]">
                                          <input class="form-control" id="sizeFieldInput"
                                                 tooltips title="{{card.description}}"
                                                 ng-show="true"
                                                 ng-model="metadataCtrl.metaData[card.id]"
                                                 ng-keypress="($event.which === 13)?metadataCtrl.createMetadata(table.id,card.id):0" autofocus/>
                                          <div class="input-group-btn">
                                            <button class="btn btn-default fa fa-check " ng-click="metadataCtrl.createMetadata(table.id, card.id);" ></button>
                                            <button class="btn btn-default fa fa-times" ng-click="metadataCtrl.setVisibilityAddMetadata(table.id + '-' + field.tagName, false);"></button>
                                          </div>
                                        </div>

                                        <!--single select list input type-->
                                        <div class="input-group input-group-sm"
                                             ng-if="field.tagName === card.title && card.fieldtypeid === 2" 
                                             ng-show="metadataCtrl.visibilityInfo[table.id + '-' + field.tagName]">
                                          <ui-select class="form-control" style="width: 100%;"
                                            ng-model="metadataCtrl.metaData[card.id]" 
                                            theme="select2" ng-disabled="disabled" required>
                                            <ui-select-match placeholder="Select a value...">{{$select.selected.value}}</ui-select-match>
                                            <ui-select-choices repeat="item.value as item in card.fieldtypeContent | filter: $select.search">
                                              <!--<div ng-bind-html="item.value | highlight: $select.search"></div>-->
                                              <small>
                                                <span ng-bind-html="''+item.value | highlight: $select.search"></span>
                                              </small>
                                            </ui-select-choices>
                                          </ui-select>
                                          <div class="input-group-btn">
                                            <button class="btn btn-default fa fa-check" ng-click="metadataCtrl.createMetadata(table.id, card.id);"></button>
                                            <button class="btn btn-default fa fa-times" ng-click="metadataCtrl.setVisibilityAddMetadata(table.id + '-' + field.tagName, false);"></button>
                                          </div>
                                        </div>

                                        <!--multi select list input type-->
                                        <div class="input-group input-group-sm"
                                             ng-if="field.tagName === card.title && card.fieldtypeid === 3" 
                                             ng-show="metadataCtrl.visibilityInfo[table.id + '-' + field.tagName]">
                                            <ui-select class="form-control" multiple ng-model="metadataCtrl.metaData[card.id]" 
                                                       theme="bootstrap" 
                                                       close-on-select="false" style="width: 235px; max-height: 70px;">
                                              <ui-select-match placeholder="Select values...">{{$item.value}}</ui-select-match>
                                              <ui-select-choices repeat="card in card.fieldtypeContent | filter:$select.search">
                                                {{card.value}}
                                              </ui-select-choices>
                                            </ui-select>
                                          <!--div class="form-control"
                                            isteven-multi-select
                                            input-model="card.fieldtypeContent"
                                            output-model="metadataCtrl.metaData[card.id]"
                                            button-label="value"
                                            item-label="value"
                                            tick-property="ticked"
                                            output-properties="value"
                                            style="display:inline-block">
                                          </div-->
                                          <div class="input-group-btn">
                                            <button class="btn btn-default fa fa-check" ng-click="metadataCtrl.createMetadata(table.id, card.id);"></button>
                                            <button class="btn btn-default fa fa-times" ng-click="metadataCtrl.setVisibilityAddMetadata(table.id + '-' + field.tagName, false);"></button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>

                                    <div style="width: 100%; height: 15px;" ng-show="metadataCtrl.visibilityInfo[table.id + '-' + field.tagName]"></div>




                                    <div ng-repeat="value in field.metadataView" style="padding-left: 15px;padding-top: 0px">
                                      <div ng-hide="metadataCtrl.visibilityInfo[value.id]" ng-if="value.data !== ''" ng-init="metashow[value.id] = false" ng-mouseenter="metashow[value.id] = true" ng-mouseleave="metashow[value.id] = false">
                                        <div style="display:inline-block" >
                                          <label style="font-weight: normal">{{value.data}}</label>
                                        </div>
                                        <div style="display:inline-block;padding-left: 20px" ng-show="metashow[value.id]">
                                          <button class="btn btn-info btn-xs" ng-click="metadataCtrl.setVisibilityAddMetadata(value.id, true);" ><i class="fa fa-pencil"></i></button>
                                          <button class="btn btn-danger btn-xs" ng-click="metadataCtrl.removeMetadata(value);" ><i class="fa fa-times"></i></button>
                                        </div>
                                        <br>
                                      </div>


                                      <div  class="pull-left " style="padding-bottom: 0;">
                                        <div ng-repeat="card in table.inputcontent">
                                          <!--text input field type-->
                                          <div ng-if="field.tagName === card.title && card.fieldtypeid === 1" ng-show="metadataCtrl.visibilityInfo[value.id]">
                                            <input placeholder="{{value.data}}" class="fillInMetadataInput" id="sizeFieldInput"
                                                   tooltips title="{{card.description}}"
                                                   ng-show="true"
                                                   ng-model="metadataCtrl.metaDataDetail[value.id]"  style="width: 100px"/>
                                            <button class="btn btn-default btn-xs" ng-click="metadataCtrl.updateMetadata(value);" ><span class="glyphicon glyphicon-ok"></span></button>
                                            <button class="btn btn-default btn-xs" ng-click="metadataCtrl.setVisibilityAddMetadata(value.id, false);"><span class="glyphicon glyphicon-remove"></span></button>

                                          </div>

                                          <!--single select list input type-->
                                          <div ng-if="field.tagName === card.title && card.fieldtypeid === 2" style="min-width: 125px;" ng-show="metadataCtrl.visibilityInfo[value.id]">
                                            <ui-select ng-model="metadataCtrl.metaDataDetail[value.id]" theme="select2" ng-disabled="disabled" style="min-width: 100px;" required>
                                              <ui-select-match placeholder="Select a value...">{{$select.selected.value}}</ui-select-match>
                                              <ui-select-choices repeat="item.value as item in card.fieldtypeContent | filter: $select.search">
                                                <!--<div ng-bind-html="item.value | highlight: $select.search"></div>-->
                                                <small>
                                                  <span ng-bind-html="''+item.value | highlight: $select.search"></span>
                                                </small>
                                              </ui-select-choices>
                                            </ui-select>
                                            <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-ok" ng-click="metadataCtrl.updateMetadata(value);"></span></button>
                                            <button class="btn btn-default btn-xs" ng-click="metadataCtrl.setVisibilityAddMetadata(value.id, false);"><span class="glyphicon glyphicon-remove"></span></button>
                                          </div>

                                          <!--multi select list input type-->
                                          <div ng-if="field.tagName === card.title && card.fieldtypeid === 3" ng-show="metadataCtrl.visibilityInfo[value.id]">
                                            <ui-select ng-model="metadataCtrl.metaDataDetail[value.id]" theme="select2" ng-disabled="disabled" style="min-width: 100px;" required>
                                              <ui-select-match placeholder="Select a value...">{{$select.selected.value}}</ui-select-match>
                                              <ui-select-choices repeat="item.value as item in card.fieldtypeContent | filter: $select.search">
                                                <!--<div ng-bind-html="item.value | highlight: $select.search"></div>-->
                                                <small>
                                                  <span ng-bind-html="''+item.value | highlight: $select.search"></span>
                                                </small>
                                              </ui-select-choices>
                                            </ui-select>
                                            <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-ok" ng-click="metadataCtrl.updateMetadata(value);"></span></button>
                                            <button class="btn btn-default btn-xs" ng-click="metadataCtrl.setVisibilityAddMetadata(value.id, false);"><span class="glyphicon glyphicon-remove"></span></button>
                                          </div>
                                        </div>
                                      </div>
                                      <div style="width: 100%; height: 35px;" ng-show="metadataCtrl.visibilityInfo[value.id]"></div>





                                    </div>

                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </md-tab>

                      <md-tab label="Activity">
                        <md-content class="md-padding" style="padding-left: 20px;padding-right: 20px;">

                          <!--                          <div class="row">
                                                      <span
                                                        style="color: #444;font-size: 11px; margin-bottom: 10px;padding: 16px 6px 6px;text-transform: uppercase;">
                                                        LAST WEEK
                                                      </span>
                          
                                                      <md-whiteframe class="md-whiteframe-z1" layout layout-align="center center"
                                                                     style="border-radius: 3px; margin-top:10px;">
                                                        <div class="col-md-2" style="margin-top: -45px;">
                                                          <img class="profile-image img-circle" style="height: 42px; border: 1px solid lightgrey;"
                                                               src="https://gravatar.com/avatar/4b43f0e86b038f246887dde7f399a5a3?d=mm">
                                                        </div>
                                                        <div class="col-md-10" style="margin-top: 12px;padding-left:20px;">
                                                          <b>You</b> uploaded an item
                                                          </br>
                                                          <span style="color:#444; font-size: 11px;">Apr 30</span>
                          
                                                          <p style="margin-top: 20px; color:#444;">
                                                            SICSEngineering.pdf
                                                          </p>
                                                        </div>
                                                      </md-whiteframe>
                          
                                                      <md-whiteframe class="md-whiteframe-z1" layout layout-align="center center"
                                                                     style="border-radius: 3px; margin-top:20px; margin-bottom: 20px;">
                                                        <div class="col-md-2" style="margin-top: -45px;">
                                                          <img class="profile-image img-circle" style="height: 42px; border: 1px solid lightgrey;"
                                                               src="https://gravatar.com/avatar/4b43f0e86b038f246887dde7f399a5a3?d=mm">
                                                        </div>
                                                        <div class="col-md-10" style="margin-top: 12px;padding-left:20px;">
                                                          <b>Andr√©</b> uploaded an item
                                                          </br>
                                                          <span style="color:#444; font-size: 11px;">Apr 11</span>
                          
                                                          <p style="margin-top: 20px; color:#444;">
                                                            AndreSecretFile.rsa
                                                          </p>
                                                        </div>
                                                      </md-whiteframe>
                          
                                                      <span
                                                        style="color: #444;font-size: 11px; margin-bottom: 10px;padding: 16px 6px 6px;text-transform: uppercase;">
                                                        EARLIER THIS MONTH
                                                      </span>
                          
                          
                                                      <md-whiteframe class="md-whiteframe-z1" layout layout-align="center center"
                                                                     style="border-radius: 3px; margin-top:10px;">
                                                        <div class="col-md-2" style="margin-top: -45px;">
                                                          <img class="profile-image img-circle" style="height: 42px; border: 1px solid lightgrey;"
                                                               src="https://gravatar.com/avatar/f7b87f83afcba880c6300e1e4e4a8790?d=mm">
                                                        </div>
                                                        <div class="col-md-10" style="margin-top: 12px;padding-left:20px;">
                                                          <b>Ermias</b> uploaded an item
                                                          </br>
                                                          <span style="color:#444; font-size: 11px;">Apr 07</span>
                          
                                                          <p style="margin-top: 20px; color:#444;">
                                                            happy_birthday.cake
                                                          </p>
                                                        </div>
                                                      </md-whiteframe>
                                                    </div> -->
                        </md-content>
                      </md-tab>

                    </md-tabs>
                  </md-content>
                </div>
              </div>
            </div>
          </div>
        </div>

      </section>
    </div>
  </div>
</div>
