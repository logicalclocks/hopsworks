<!--
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2018, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  -->

<div class="modal-header">
    <button class="close" ng-click="featuregroupViewInfoCtrl.close()" data-dismiss="modal" aria-hidden="true"
            type="button">&times;
    </button>
    <h2 class="modal-title">Feature group details: {{featuregroupViewInfoCtrl.featuregroup.featuregroupName}}</h2>
</div>
<div class="modal-body" style="overflow: auto">
    <div class="row">
        <table class="table table-hover fs-table" style="margin-left: 10px; overflow: auto">
            <tbody class="fs-table">
            <tr data-ng-repeat="row in featuregroupViewInfoCtrl.table" class="fs-table">
                <td style="font-weight:700;" class="fs-table">{{row.property}}</td>
                <td class="fs-table" ng-if="featuregroupViewInfoCtrl.isRegularRow(row.property)">{{row.value}}</td>

                <td ng-if="row.property == 'Last Computed'" class="fs-table">
                    <div ng-if="featuregroupViewInfoCtrl.featuregroup.lastComputed === null">
                        -
                    </div>
                    <div ng-if="featuregroupViewInfoCtrl.featuregroup.lastComputed !== null">
                      <span
                              ng-if="featuregroupViewInfoCtrl.featuregroup.jobStatus === 'Undefined'"
                              style="color: #0066bb ">
                        {{formatDate(featuregroupViewInfoCtrl.featuregroup.lastComputed)}}
                      </span>
                        <span
                                ng-if="featuregroupViewInfoCtrl.featuregroup.jobStatus === 'Succeeded'"
                                style="color: #00A000 ">
                        {{formatDate(featuregroupViewInfoCtrl.featuregroup.lastComputed)}}
                      </span>
                        <span
                                ng-if="featuregroupViewInfoCtrl.featuregroup.jobStatus === 'Failed'"
                                style="color: #880000 ">
                        {{formatDate(featuregroupViewInfoCtrl.featuregroup.lastComputed)}}
                      </span>
                        <span
                                ng-if="featuregroupViewInfoCtrl.featuregroup.jobStatus === 'Killed'"
                                style="color: #880000 ">
                        {{formatDate(featuregroupViewInfoCtrl.featuregroup.lastComputed)}}
                      </span>
                    </div>
                </td>

                <td ng-if="row.property == 'Job'" class="fs-table">
                    <div ng-if="featuregroupViewInfoCtrl.featuregroup.jobName === null">
                        no job specified
                    </div>
                    <div ng-if="featuregroupViewInfoCtrl.featuregroup.jobName !== null">
                      <span ng-if="featuregroupViewInfoCtrl.isJobLocal(featuregroupViewInfoCtrl.featuregroup.jobId)"
                            style="cursor:pointer;color:black;text-decoration:underline;"
                            ng-click="featuregroupViewInfoCtrl.launchJob(featuregroupViewInfoCtrl.featuregroup.jobName); $event.stopPropagation();">
                        {{featuregroupViewInfoCtrl.featuregroup.jobName}}
                      </span>
                        <span
                                ng-if="!featuregroupViewInfoCtrl.isJobLocal(featuregroupViewInfoCtrl.featuregroup.jobId)"
                                style="color: #880000 ">
                        (The job is owned by another project)
                      </span>
                    </div>
                </td>
                <td ng-if="row.property == 'API Retrieval Code'" style="white-space: pre-wrap" class="fs-table">
<pre>
<code>{{row.value}}</code>
</pre>
                </td>
            </tr>
            <tr class="fs-table">
                <td style="font-weight:700;" class="fs-table">
                    SQL Schema
                </td>
                <td class="fs-table">
<pre>
<code>{{featuregroupViewInfoCtrl.schema}}</code>
</pre>
                    <i ng-if="featuregroupViewInfoCtrl.schemaWorking" style="margin-top: 2px; text-align: center;"
                       class="fa fa-spinner fa-spin"></i>
                </td>
            </tr>
            <tr class="fs-table">
                <td style="font-weight:700;">
                    Size
                </td>
                <td class="fs-table">
                    {{featuregroupViewInfoCtrl.size}}
                    <i ng-if="featuregroupViewInfoCtrl.sizeWorking" style="margin-top: 2px; text-align: center;"
                       class="fa fa-spinner fa-spin"></i>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
