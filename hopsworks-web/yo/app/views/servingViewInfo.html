<!--
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2019, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  -->

<div class="modal-header">
    <button class="close" ng-click="servingViewInfoCtrl.close()" data-dismiss="modal" aria-hidden="true"
            type="button">&times;
    </button>
    <h2 class="modal-title">Serving details: {{servingViewInfoCtrl.serving.name}}</h2>
</div>
<div class="modal-body" style="overflow: auto">
    <div class="row">
        <table class="table table-hover" style="margin-left: 10px; overflow: auto">
            <thead style="border:none;">
            <th style="width: 10%">Property</th>
            <th style="width: 20%">Value</th>
            </thead>
            <tbody>
            <tr>
                <td>
                 Serving Name <i class="fa fa-info-circle" tooltip-placement="auto left"
                                 uib-tooltip="Name of the serving (unique identifier)"
                                 style="margin-left: 10px"></i>
                </td>
                <td>{{servingViewInfoCtrl.serving.name}}</td>
            </tr>
            <tr>
                <td>
                    Predict inference endpoint
                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                                    uib-tooltip="REST endpoint for
                                    predict inference requests."
                                    style="margin-left: 10px"></i>
                </td>
                <td>{{servingViewInfoCtrl.getPredictInferenceEndpoint(servingViewInfoCtrl.serving.name)}}</td>
            </tr>
            <tr>
                <td>
                    Classify inference endpoint
                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                       uib-tooltip="REST endpoint for
                                    classify inference requests."
                       style="margin-left: 10px"></i>
                </td>
                <td>{{servingViewInfoCtrl.getClassifyInferenceEndpoint(servingViewInfoCtrl.serving.name)}}</td>
            </tr>
            <tr>
                <td>
                    Regression inference endpoint
                    <i class="fa fa-info-circle" tooltip-placement="auto left"
                       uib-tooltip="REST endpoint for
                                    regression inference requests."
                       style="margin-left: 10px"></i>
                </td>
                <td>{{servingViewInfoCtrl.getRegressInferenceEndpoint(servingViewInfoCtrl.serving.name)}}</td>
            </tr>
            <tr>
                <td>
                    Serving Server Port <i class="fa fa-info-circle" tooltip-placement="auto left"
                                           uib-tooltip="Port of the  serving instance (necessary if you want to send requests directly to the serving server
                                           rather than going through the standard inference endpoint).
                                           If the serving server is not running the port will be undefined."
                                           style="margin-left: 10px"></i>
                </td>
                <td>{{servingViewInfoCtrl.getPortString(servingViewInfoCtrl.serving.nodePort)}}</td>
            </tr>
            <tr>
                <td>
                    Batching <i class="fa fa-info-circle" tooltip-placement="auto left"
                                           uib-tooltip="Whether batching is enabled for the serving instance.
                                           With batching, several inference requests will be processed together by the serving instance rather than processing one request at a time.
                                           This will give a speedup in terms of number of inference requests processed per second, especially if using GPUs."
                                           style="margin-left: 10px"></i>
                </td>
                <td> <span class="glyphicon glyphicon-ok-circle" ng-show="servingViewInfoCtrl.serving.batchingEnabled"/>
                    <span ng-show="!servingViewInfoCtrl.serving.batchingEnabled"> No </span> </td>
            </tr>
            <tr>
                <td>
                    Creator <i class="fa fa-info-circle" tooltip-placement="auto left"
                                uib-tooltip="User that created the serving."
                                style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.creator}} </td>
            </tr>
            <tr>
                <td>
                    Instances <i class="fa fa-info-circle" tooltip-placement="auto left"
                               uib-tooltip="Number of active instances of the serving out of the total number of instances.
                                           Using multiple instances is recommended for servings with high load of inference
                                           requests as the number of requests will be load balanced across the active instances."
                               style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.availableInstances}} / {{servingViewInfoCtrl.serving.requestedInstances}} </td>
            </tr>
            <tr>
                <td>
                    Kafka Topic Name <i class="fa fa-info-circle" tooltip-placement="auto left"
                                 uib-tooltip="Name of the kafka topic where inference requests and responses are logged.
                                             The kafka topic can be used to monitor how the serving instance is handling inference requests in real-time."
                                 style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.kafkaTopicDTO.name}} </td>
            </tr>
            <tr>
                <td>
                    Deployed <i class="fa fa-info-circle" tooltip-placement="auto left"
                                        uib-tooltip="Timestamp when the serving was deployed."
                                        style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.deployed | date:'medium'}} </td>
            </tr>
            <tr ng-if="servingViewInfoCtrl.isKubernetes">
                <td>
                    Memory <i class="fa fa-info-circle" tooltip-placement="auto left"
                                uib-tooltip="Memory allocated for the serving container."
                                style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.predictorResourceConfig.memory}} </td>
            </tr>
            <tr ng-if="servingViewInfoCtrl.isKubernetes">
                <td>
                    Virtual cores <i class="fa fa-info-circle" tooltip-placement="auto left"
                                uib-tooltip="Virtual cores allocated for the serving container."
                                style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.predictorResourceConfig.cores}} </td>
            </tr>
            <tr ng-if="servingViewInfoCtrl.isKubernetes">
                <td>
                    GPUs <i class="fa fa-info-circle" tooltip-placement="auto left"
                                uib-tooltip="GPUs allocated for the serving container."
                                style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.predictorResourceConfig.gpus}} </td>
            </tr>
            <tr ng-if="servingViewInfoCtrl.isKubernetes">
                <td>
                    Revision <i class="fa fa-info-circle" tooltip-placement="auto left"
                                uib-tooltip="Revision identifier of the last operation (i.e create, update, delete)."
                                style="margin-left: 10px"></i>
                </td>
                <td> {{servingViewInfoCtrl.serving.revision}} </td>
            </tr>
            </tbody>
        </table>
    </div>

</div>
