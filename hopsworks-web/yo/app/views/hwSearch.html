<!--
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2020, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  -->

<form>
    <label class="hw-search-wrapper col-xs-12 col-sm-4 col-md-4 dropdown" style="min-width: 370px; max-width: 370px;"
           ng-class="{'open': hwSearchCtrl.searchTerm.length > 0 && hwSearchCtrl.notSent && !searching}">
        <div class="input-group" style="width: 100%; margin-top: 4px;" aria-haspopup="true"
           aria-expanded="false">
            <input class="hw-search-input form-control" placeholder="Search"
                   name="srch-term" id="srch-term" ng-model="hwSearchCtrl.searchTerm"  ng-model-options="{debounce: 200}"
                   ng-keyup="hwSearchCtrl.keyUp($event)"
                   ng-keydown="hwSearchCtrl.keydown($event)">
            <span class="input-group-addon" id="basic-addon2"
                  ng-class="{'clickable': hwSearchCtrl.searchTerm.length > 0 && !searching, 'notClickable': hwSearchCtrl.searchTerm.length <= 0 || searching}"
                  ng-click="hwSearchCtrl.select(scopes[hwSearchCtrl.activeSuggestion])">
                <i class="fa fa-search" aria-hidden="true"></i>
            </span>
        </div>
        <ul class="dropdown-menu" style="width: 100%" ng-show="hwSearchCtrl.searchTerm.length > 0 && !searching">
            <li id="suggestion-{{ $index}}" class="hw-search-suggestion" ng-repeat="op in scopes"
                ng-class="{active: hwSearchCtrl.activeSuggestion === $index}"
                ng-click="hwSearchCtrl.select(op)"
                tabindex="0">
                <i class="fa fa-search" aria-hidden="true"></i>
                <span class="search-term">{{hwSearchCtrl.searchTerm}}</span>
                <span style="width: 100%; text-align: right;">
                    <span class="badge">{{op}}</span>
                </span>
            </li>
        </ul>
    </label>
</form>