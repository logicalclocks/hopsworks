<!--
  ~ Changes to this file committed after and not including commit-id: ccc0d2c5f9a5ac661e60e6eaf138de7889928b8b
  ~ are released under the following license:
  ~
  ~ This file is part of Hopsworks
  ~ Copyright (C) 2018, Logical Clocks AB. All rights reserved
  ~
  ~ Hopsworks is free software: you can redistribute it and/or modify it under the terms of
  ~ the GNU Affero General Public License as published by the Free Software Foundation,
  ~ either version 3 of the License, or (at your option) any later version.
  ~
  ~ Hopsworks is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
  ~ PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.
  ~ If not, see <https://www.gnu.org/licenses/>.
  ~
  ~ Changes to this file committed before and including commit-id: ccc0d2c5f9a5ac661e60e6eaf138de7889928b8b
  ~ are released under the following license:
  ~
  ~ Copyright (C) 2013 - 2018, Logical Clocks AB and RISE SICS AB. All rights reserved
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy of this
  ~ software and associated documentation files (the "Software"), to deal in the Software
  ~ without restriction, including without limitation the rights to use, copy, modify, merge,
  ~ publish, distribute, sublicense, and/or sell copies of the Software, and to permit
  ~ persons to whom the Software is furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all copies or
  ~ substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS  OR IMPLIED, INCLUDING
  ~ BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  ~ NONINFRINGEMENT. IN NO EVENT SHALL  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
  ~ DAMAGES OR  OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  -->

<div class="container content-wrapper" style="border-top:none">
  <div class="row-fluid">
    <div class="col-md-offset-3 col-md-6">
      <!-- START panel-->
      <div class="panel">
        <div class="panel-heading text-center">
          <a style="text-decoration:none; font-family: Lobster; font-size: 30px; margin-left: 5px; color: #fff;">Hopsworks
            <img alt="" style="margin-left:10px"
                 width="30"
                 src="images/hops.png">
          </a>
        </div>
        <div class="panel-body">
          <p class="text-center">SIGN UP TO GET ACCESS.</p>

          <form role="form" name="registerForm" ng-submit="regCtrl.register()" novalidate class="form-validate">
            <div class="row">
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">First Name</label>
                  <input name="first_name" placeholder="First Name" autocomplete="off"
                         ng-model="regCtrl.newUser.firstName" required class="form-control "
                         type="text">
                  <span ng-show="(registerForm.$submitted || registerForm.first_name.$dirty) &amp;&amp; registerForm.first_name.$error.required"
                        class="text-danger ng-hide">This field is required</span>
                </div>
              </div>
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Last Name</label>
                  <input name="last_name" placeholder="Last Name" autocomplete="off"
                         ng-model="regCtrl.newUser.lastName" required class="form-control "
                         type="text">
                  <span ng-show="(registerForm.$submitted || registerForm.last_name.$dirty) &amp;&amp; registerForm.last_name.$error.required"
                        class="text-danger ng-hide">This field is required</span>
                </div>
              </div>
            </div>
            <div class="row"> 
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Email address</label>
                  <input name="user_email" placeholder="Email" autocomplete="off"
                         ng-model="regCtrl.newUser.email" required
                         class="form-control"
                         type="email">
                  <span class="fa fa-envelope form-control-feedback text-muted"></span>
                  <span ng-show="(registerForm.$submitted || registerForm.user_email.$dirty) &amp;&amp; registerForm.user_email.$error.required"
                        class="text-danger ng-hide">This field is required</span>
                  <span ng-show="registerForm.user_email.$dirty &amp;&amp; registerForm.user_email.$error.email"
                        class="text-danger ng-hide">This field must be a valid email address</span>
                </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Phone Number</label>
                  <input name="phone_number" placeholder="Phone" autocomplete="on"
                         ng-model="regCtrl.newUser.telephoneNum"
                         ng-pattern="/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/"
                         class="form-control "
                         type="text">
                  <span ng-show="registerForm.phone_number.$dirty &amp;&amp; registerForm.phone_number.$error.pattern"
                        class="text-danger ng-hide">Phone number should be in the format: 000-000 000000.</span>
                </div>
                  </div>
            </div>
            
            <div class="row">
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Password</label>
                  <input id="id-password" name="user_password"
                         ng-model="regCtrl.newUser.chosenPassword"
                         ng-minlength="6"
                         ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*[\d\W]).*$/"
                         required
                         class="form-control"
                         type="password">
                  <span class="fa fa-lock form-control-feedback text-muted"></span>
                </div>
              </div>
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Confirm Password</label>
                  <input name="user_password_confirm" ng-model="regCtrl.newUser.repeatedPassword"
                         match="id-password"
                         class="form-control" type="password">
                  <span class="fa fa-lock form-control-feedback text-muted"></span>               
                </div>
              </div>
            </div>
            <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <span ng-show="(registerForm.$submitted || registerForm.user_password.$dirty) &amp;&amp; registerForm.user_password.$error.required"
                          class="text-danger ng-hide">This field is required</span>
                    <span ng-show="registerForm.user_password.$dirty &amp;&amp; registerForm.user_password.$error.minlength"
                          class="text-danger ng-hide">Your password should be at least 6 characters long.</span>   
                    <span ng-show="registerForm.user_password.$dirty &amp;&amp; registerForm.user_password.$error.pattern &amp;&amp; !registerForm.user_password.$error.minlength"
                          class="text-danger ng-hide">Your password should contain at least one lower case letter [a-z], one upper case letter [A-Z] and one numeric character [0-9].</span>   
                    <span ng-show="(registerForm.$submitted || registerForm.user_password_confirm.$dirty) &amp;&amp; registerForm.user_password_confirm.$error.pwmatch &amp;&amp; !(registerForm.user_password.$error.minlength || registerForm.user_password.$error.pattern)"
                          class="text-danger ng-hide">The two passwords you entered do not match</span>
                  </div>
            </div>
             <div class="row">
              <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                    <label class="text-muted">Security question</label>
                    <select name="sec_question" placeholder="Security question"
                          ng-model="regCtrl.newUser.securityQuestion" required
                          class="form-control ">
                    <option value="">Select security question</option>
                    <option ng-repeat="question in regCtrl.securityQuestions" value="{{question}}">{{question}}</option>
                    </select>
                    <span ng-show="(registerForm.$submitted || registerForm.sec_question.$dirty) &amp;&amp; registerForm.sec_question.$error.required"
                        class="text-danger ng-hide">This field is required</span>
                </div>
              </div>
               <div class="col-xs-12 col-sm-6 col-md-6">
                <div class="form-group has-feedback">
                  <label class="text-muted">Security answer</label>
                  <input name="sec_answer" placeholder="Security answer"
                         autocomplete="off"
                         ng-model="regCtrl.newUser.securityAnswer" required
                         class="form-control"
                         type="text">
                  <span ng-show="(registerForm.$submitted || registerForm.sec_answer.$dirty) &amp;&amp; registerForm.sec_answer.$error.required"
                        class="text-danger ng-hide">This field is required</span>
                </div>
              </div>
            </div>
            <div ng-if="regCtrl.otp === 'true'">
            </div>
            <div class="row"> 
              <div class="col-md-6">
                <div class="checkbox c-checkbox">
                  <label>
                    <input required="" name="user_agreed" ng-model="regCtrl.newUser.ToS"
                           type="checkbox">
                    <span class="fa fa-check"></span>I agree with the 
                    <a type="button" data-target="#tosModal" data-toggle="modal">terms</a>
                  </label>
                  <div ng-show="(registerForm.$submitted || registerForm.user_agreed.$dirty) &amp;&amp; registerForm.user_agreed.$error.required"
                       class="text-danger ng-hide">You must agree to the terms
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="checkbox c-checkbox" ng-if="regCtrl.otp === 'true'">
                  <label>
                    <input name="2FactorAuth" ng-model="regCtrl.newUser.twoFactor"
                           type="checkbox">
                    <span class="fa fa-check"></span>Enable Two Factor Authentication.
                  </label>
                </div>
              </div>              
            </div>            
            <div class="row">
              <div class="col-md-12">
                <button type="submit" class="btn btn-block btn-primary mt-lg" data-ng-disabled="regCtrl.working">Create account
                </button>
              </div>
            </div>
          </form>
          <div style="text-align: center" class="text-muted" ng-show="regCtrl.working">
            <i class="fa fa-spinner fa-spin"></i> 
            Registering your new account.
          </div>
          <div ng-show="regCtrl.successMessage" class="alert  alert-success text-center ng-binding ng-hide">{{regCtrl.successMessage}}</div>
          <div ng-show="regCtrl.errorMessage" class="alert alert-danger text-center ng-binding ng-hide">{{regCtrl.errorMessage}}</div>
          <p class="pt-lg text-center">Have an account?</p>
          <a href="#!/login" class="btn btn-block btn-default">Sign in</a>
        </div>
      </div>
      <!-- END panel-->
      <div class="p-lg text-center">
      </div>
    </div>
  </div>
</div>
<modal id="tosModal" title="Terms & Conditions">
        <p><strong>Agreement</strong></p>
      
        <p> Hopsworks is software-as-a-service (SaaS) for Apache Hadoop, Apache Spark, Apache Flink, Apache Zeppelin, and Elasticsearch.
        </p>
        <b> Definitions</b>

        <ul>  
          <li>
            <i>User</i> – the data owner acting as the controller, the legally responsible party who uploads the data on the platform.
          </li>
          <li>
            <i>Hopsworks platform</i> – the processor who processes the data on behalf of the controller
          </li>
        </ul>


        <ol> 
          <li>
            <b>Legal basis for processing:</b>
            The law applicable to the processing of data is the law that applies in the country where the
            user is established, no matter where the data is processed.
            The user undertakes to strictly follow a research protocol and only act 
            within the limits of any given consent, alternatively any other legal ground within the applicable law, 
            for example a permission from an ethical review board to allow re-use of previously consented data.  
            In order to secure the above mentioned, the user is to provide evidence of research approval for each study processed within the platform, according to the forms set out in the platform.

            <ul>
              <li>SRPA: Standard Research Project Approval</li>
              <li>SIAC: Standard Information About Consent</li>
              <li>SINC: Standard Information on Non-Consented data</li>
            </ul>
          </li>
          <br></br>

          <li>
            <b>Secrecy clause:</b>
            All personal data acquired by the Platform from the user shall only be used for the purposes of 
            this agreement and shall not be further processed or disclosed without the consent of the user.
            This does not preclude the platform from allowing access to auditing services under this agreement,
            or any legally binding requests for disclosure of personal data. 

          </li>
          <br></br>
          <li>
            <b>Transparency:</b>
            All processing of the data within the Hopsworks platform is conducted by the 
            platform itself. If any subcontractors will be involved in the future, the Hopsworks Platform 
            undertakes to inform the user in writing. If the user does not want to continue using the Hopsworks 
            Platform services under these conditions, the platform will take care to end its services under controlled forms, as set out in point 13. Termination of the contract. 
          </li>
          <br></br>

          <li>
            <b>Changes in the Services:</b>
            If in the future changes will be made in the service that requires the installation of new software, libraries or 
            hardware devices on the users systems, the Hopsworks will inform the user about this, and in particular about its
            implications from a data protection and data security point of view.

            The user agrees to provide the data subjects with information on where the data is being processed, in the event the
            data subject would want his/her data erased or changed. 
          </li>
          <br></br>

          <li>
            <b>Purpose binding:</b> 
            The platform will process the data in accordance with the instructions of the user. The user instructs the platform to:
            a) provide the services, including detection, prevention and resolution of security and technical issues, and 
            b) respond to customers support requests. 
            The platform will only process the data of the user in accordance with this agreement and will not
            process the data for any other purposes.

          </li>
          <br></br>

          <li>
            <b>Data minimization:</b>
            The access to data within the platform is restricted in accordance to different roles
            established within the platform. The user may allocate different degrees of access the data depending on
            which role a person acting within the platform is being attributed.  

            Other than the user, roles are attributed to the platform as an administrator and to ethics board or auditor 
            who may monitor the processing conducted on the platform on behalf of the user or the platform. 
          </li>
          <br></br>

          <li>
            <b>Retention periods:</b>
            When uploading data to the platform, the user shall define a period of time under which the data is to be stored (retention period).
            The retention period should not be longer than necessary to conduct the storing and analyzing needed. 
            If the user has not taken action to remove the data when the retention period has elapsed, the platform will contact 
            the user and request that this is done. The user may prolong the retention period, but only if this is in accordance with 
            applicable law. If the user does not either remove the data or prolong the retention period, the platform shall take action to 
            remove the data from the platform. The user will be given due notice before any data is removed.
          </li>
          <br></br>

          <li>
            <b>Geographical limitations of processing the data:</b>
            All processing of data within the platform will take place within the geographical area of EEA, namely the 28 Member
            States of the EU (Austria, Belgium, Bulgaria, Croatia, Cyprus, Czech Republic, Denmark, Estonia, Finland, France, Germany, 
            Greece, Hungary, Ireland, Italy, Latvia, Lithuania, Luxembourg, Malta, Netherlands, Poland, Portugal, Romania, Slovakia, Slovenia, 
            Spain, Sweden, United Kingdom) and Iceland, Liechtenstein and Norway.

          </li>
          <br></br>

          <li>
            <b>Data security:</b> 
            The platform ensures that the technical security measures and organizational measures governing the processing of the data within
            the platform is to be carried out in accordance to high safety standards. 
            The platform ensures to keep the data of the user separated from all other users, within a secured space with limited access. 
            The user is obligated to handle all security credentials with care and must not under any circumstances share them with others. 
            The user and the platform are mutually obligated to immediately report any deviations from the proper functioning of the platform.
          </li>
          <br></br>

          <li>
            <b>Accountability:</b>
            The user is to provide full contact information, including name of responsible person and his/her affiliation. The user agrees
            to keep the information updated. 

            All processing of data within the cloud is to be recorded. The user and the platform are obligated to cooperate fully in order to ensure
            the fulfillment of this task. 
            An audit organ, either internal or external, may access the recordings of the processing. Both the user and the platform may require a report
            from the audit organ to ensure that all processing of the data has been carried out in accordance with this agreement. 

          </li>
          <br></br>

          <li>
            <b>Modification of the agreement:</b>
            The platform may not unilaterally change or amend any of the terms of this agreement. All proposed changes to the agreement must be presented 
            before the user in due time and cannot enter into force until accepted by the user. 
            The platform is to inform the user of all changes in form of amendments, improvements and updates of the technical functioning of the platform.
            Any changes that may involve a change in the terms of this agreement must be accepted by the user before being implemented, as set out above. 
          </li>
          <br></br>

          <li>
            <b> Termination of the services or agreement:</b>
            The user may at any time remove his/her data from the platform.
            The user may terminate the agreement unilaterally at any time. The platform is to ensure that all data has been removed from the platform, 
            including safety copies. 
            If the user does not abide by his/her obligations under this agreement, the platform may unilaterally terminate the agreement. The user will 
            be given notice of the platforms intention in due time. If the breach is not of a serious nature, the user may be given the opportunity to rectify the breach. 
            Information on processing of data collected for auditing purposes will be stored within the platform for a reasonable time after the agreement
            has been terminated. 
          </li>
        </ol>

</modal>
